---
sidebar: sidebar 
permalink: openshift/os-pm-gcnv-setup.html 
keywords: NetApp Solutions, Redhat OpenShift Dedicated, Red hat OpenShift, redhat openshift container platform, ocp, openshift container platform, Advanced Cluster Management, ACM, Hub Cluster, containers, container workloads, VMware, customer managed storage, ONTAP, Google Cloud, Google Cloud NetApp Volumes 
summary:  
---
= Google Cloud NetApp Volumes 사용하여 Google Cloud에 OpenShift Dedicated 배포 및 구성
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
이 섹션에서는 Google Cloud 플랫폼에서 OpenShift Dedicated(OSD) 클러스터를 설정하는 개략적인 워크플로를 설명합니다.  NetApp Trident Kubernetes로 실행되는 상태 저장 애플리케이션에 영구 볼륨을 제공하기 위해 스토리지 백엔드로 Google Cloud NetApp Volumes 사용하는 것을 보여줍니다.

다음은 Google Cloud에 배포되고 NetApp Volumes를 백엔드 스토리지로 사용하는 OSD 클러스터를 보여주는 다이어그램입니다.

image:rhhc-osd-with-gcnv.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

설정 과정은 다음 단계로 나눌 수 있습니다.

.Google Cloud에 OSD 클러스터 설치
* 클러스터에 기존 VPC를 사용하려면 OSD 클러스터에 대한 VPC, 두 개의 서브넷, 클라우드 라우터, 두 개의 GCP 클라우드 NAT를 만들어야 합니다.  나타내다link:https://cloud.redhat.com/experts/gcp/osd_preexisting_vpc/["여기"] 지침을 보려면 클릭하세요.
* 나타내다link:https://docs.openshift.com/dedicated/osd_install_access_delete_cluster/creating-a-gcp-cluster.html#osd-create-gcp-cluster-ccs_osd-creating-a-cluster-on-gcp["여기"] CCS(Customer Cloud Subscription) 청구 모델을 사용하여 GCP에 OSD 클러스터를 설치하는 방법에 대한 지침을 확인하세요.  OSD는 Google Cloud Marketplace에도 포함되어 있습니다.  Google Cloud Marketplace 솔루션을 사용하여 OSD를 설치하는 방법을 보여주는 비디오가 있습니다.link:https://www.youtube.com/watch?v=p9KBFvMDQJM["여기"] .


.Google Cloud NetApp Volumes 활성화
* 나타내다link:https://cloud.google.com/netapp/volumes/docs/get-started/configure-access/workflow["여기"] Google Cloud NetApp Volumes 에 대한 액세스 설정에 대한 정보는 다음을 참조하세요.  다음 단계를 모두 따르세요.
* 스토리지 풀을 생성합니다.  나타내다link:https://cloud.google.com/netapp/volumes/docs/get-started/quickstarts/create-storage-pool#create_a_storage_pool["여기"] Google Cloud NetApp Volumes 에서 스토리지 풀을 설정하는 방법에 대한 정보입니다.  OSD에서 실행되는 상태 저장 Kubernetes 애플리케이션의 볼륨은 스토리지 풀 내에 생성됩니다.


.OSD 클러스터에 Trident 설치(Helm 차트 사용)
* Helm 차트를 사용하여 OSD 클러스터에 Trident 설치합니다.  나타내다link:https://docs.netapp.com/us-en/trident/trident-get-started/kubernetes-deploy-helm.html#critical-information-about-astra-trident-24-06["여기"] Helm Chart를 설치하는 방법에 대한 지침은 여기를 참조하세요.  헬름 차트를 찾을 수 있습니다link:https://github.com/NetApp/trident/tree/master/helm/trident-operator["여기"] .


.OSD 클러스터를 위한 NetApp Trident 와 NetApp Volumes 통합
Trident 사용하여 백엔드 및 스토리지 클래스 생성( Google Cloud NetApp Volumes 용)

* 백엔드 생성에 대한 자세한 내용은 여기를 참조하세요.
* 현재 쿠버네티스의 스토리지 클래스 중에 기본값으로 표시된 것이 있다면, 스토리지 클래스를 편집하여 해당 주석을 제거하세요.
* Trident CSI 프로비저너를 사용하여 NetApp 볼륨에 대한 스토리지 클래스를 하나 이상 만듭니다.  주석을 사용하여 저장 클래스 중 하나만 기본값으로 지정합니다.  이를 통해 PVC는 PVC 매니페스트에서 명시적으로 호출되지 않은 경우에도 이 저장 클래스를 사용할 수 있습니다.  주석이 포함된 예는 아래와 같습니다.


[source]
----
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: gcnv-standard-k8s
  annotations:
    storageclass.kubernetes.io/is-default-class: "true"
provisioner: csi.trident.netapp.io
parameters:
  backendType: "google-cloud-netapp-volumes"
  trident.netapp.io/nasType: "nfs"
allowVolumeExpansion: true
----
.OpenShift GitOps(Argo CD)를 사용하여 애플리케이션 배포
* 클러스터에 OpenShift GitOps 운영자를 설치합니다.  지침을 참조하세요link:https://docs.openshift.com/gitops/1.13/installing_gitops/installing-openshift-gitops.html["여기"] .
* 클러스터에 대한 새로운 Argo CD 인스턴스를 설정합니다.  지침을 참조하세요link:https://docs.openshift.com/gitops/1.13/argocd_instance/setting-up-argocd-instance.html["여기"] .


Argo CD의 콘솔을 열고 앱을 배포합니다.  예를 들어, Helm Chart와 Argo CD를 사용하여 Jenkins 앱을 배포할 수 있습니다.  애플리케이션을 생성할 때 다음 세부 정보가 제공되었습니다. 프로젝트: 기본 클러스터:'https://kubernetes.default.svc'[] (따옴표 없이) 네임스페이스: Jenkins Helm 차트의 URL:'https://charts.bitnami.com/bitnami'[] (따옴표 없이)
