---
sidebar: sidebar 
permalink: vmware/vmw-gcp-gcve-app-dr-guest-veeam.html 
keywords: gcp, gcve, snapcenter, cvo, iscsi, guest connect, dr, disaster recovery 
summary: 클라우드로 재해 복구를 수행하는 것은 랜섬웨어와 같은 사이트 중단 및 데이터 손상 사건으로부터 워크로드를 보호하는 탄력적이고 비용 효율적인 방법입니다.  NetApp SnapMirror 사용하면 게스트 연결 스토리지를 사용하는 온프레미스 VMware 워크로드를 Google Cloud에서 실행되는 NetApp Cloud Volumes ONTAP 으로 복제할 수 있습니다. 
---
= SnapCenter, Cloud Volumes ONTAP 및 Veeam 복제를 통한 애플리케이션 재해 복구
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
클라우드로 재해 복구를 수행하는 것은 랜섬웨어와 같은 사이트 중단 및 데이터 손상 사건으로부터 워크로드를 보호하는 탄력적이고 비용 효율적인 방법입니다.  NetApp SnapMirror 사용하면 게스트 연결 스토리지를 사용하는 온프레미스 VMware 워크로드를 Google Cloud에서 실행되는 NetApp Cloud Volumes ONTAP 으로 복제할 수 있습니다.



== 개요

여기에는 애플리케이션 데이터가 포함됩니다. 하지만 실제 VM 자체는 어떻습니까?  재해 복구는 가상 머신, VMDK, 애플리케이션 데이터 등 모든 종속 구성 요소를 포괄해야 합니다.  이를 달성하기 위해 SnapMirror 와 Veeam을 함께 사용하면 VM VMDK에 vSAN 스토리지를 사용하면서 온프레미스에서 Cloud Volumes ONTAP 으로 복제된 워크로드를 원활하게 복구할 수 있습니다.

이 문서에서는 NetApp SnapMirror, Veeam 및 Google Cloud VMware Engine(GCVE)을 사용하여 재해 복구를 설정하고 수행하기 위한 단계별 접근 방식을 제공합니다.

image:dr-cvo-gcve-001.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]



== 가정

이 문서는 애플리케이션 데이터를 위한 게스트 내부 스토리지(게스트 연결이라고도 함)에 초점을 맞추고 있으며, 온프레미스 환경에서는 애플리케이션과 일관된 백업을 위해 SnapCenter 사용한다고 가정합니다.


NOTE: 이 문서는 모든 타사 백업 또는 복구 솔루션에 적용됩니다.  환경에서 사용되는 솔루션에 따라 조직의 SLA를 충족하는 백업 정책을 만드는 모범 사례를 따르세요.

온프레미스 환경과 Google Cloud 네트워크를 연결하려면 전용 상호 연결이나 Cloud VPN과 같은 연결 옵션을 사용하세요.  세그먼트는 온프레미스 VLAN 설계를 기반으로 생성되어야 합니다.


NOTE: 온프레미스 데이터 센터를 Google Cloud에 연결하는 데에는 여러 가지 옵션이 있으므로 이 문서에서는 구체적인 워크플로를 설명할 수 없습니다.  온프레미스와 Google 간의 적절한 연결 방법에 대해서는 Google Cloud 문서를 참조하세요.



== DR 솔루션 배포



=== 솔루션 배포 개요

. SnapCenter 사용하여 필요한 RPO 요구 사항을 충족하는 애플리케이션 데이터를 백업하세요.
. 적절한 구독 및 가상 네트워크 내에서 Cloud Manager를 사용하여 올바른 인스턴스 크기로 Cloud Volumes ONTAP 프로비저닝합니다.
+
.. 해당 애플리케이션 볼륨에 맞게 SnapMirror 구성합니다.
.. 예약된 작업 후 SnapMirror 업데이트를 트리거하도록 SnapCenter 의 백업 정책을 업데이트합니다.


. Veeam 소프트웨어를 설치하고 가상 머신을 Google Cloud VMware Engine 인스턴스로 복제하기 시작합니다.
. 재해 발생 시 Cloud Manager를 사용하여 SnapMirror 관계를 끊고 Veeam을 사용하여 가상 머신의 장애 조치를 트리거합니다.
+
.. 애플리케이션 VM에 대한 ISCSI LUN과 NFS 마운트를 다시 연결합니다.
.. 온라인으로 신청하세요.


. 기본 사이트가 복구된 후 SnapMirror 역방향으로 재동기화하여 보호된 사이트로 장애 복구를 호출합니다.




=== 배포 세부 정보

.Google Cloud에서 CVO를 구성하고 볼륨을 CVO에 복제합니다.
[%collapsible%open]
====
첫 번째 단계는 Google Cloud에서 Cloud Volumes ONTAP 구성하는 것입니다(link:vmw-gcp-gcve-guest-storage.html#gcp-cvo["씨보"^] ) 원하는 빈도와 스냅샷 보존 기간을 설정하여 원하는 볼륨을 Cloud Volumes ONTAP 에 복제합니다.

image:dr-cvo-gcve-002.png["입력/출력 대화 상자 또는 서면 내용을 나타내는 그림"]

SnapCenter 설정 및 데이터 복제에 대한 단계별 샘플 지침은 다음을 참조하세요.link:vmw-aws-vmc-guest-storage-dr.html#config-snapmirror["SnapCenter 사용하여 복제 설정"]

.SnapCenter 사용하여 복제 설정
video::395e33db-0d63-4e48-8898-b01200f006ca[panopto]
====
.GCVE 호스트 및 CVO 데이터 액세스 구성
[%collapsible%open]
====
SDDC를 배포할 때 고려해야 할 두 가지 중요한 요소는 GCVE 솔루션의 SDDC 클러스터 크기와 SDDC를 서비스에서 유지하는 기간입니다.  재해 복구 솔루션에 대한 이 두 가지 주요 고려 사항은 전반적인 운영 비용을 줄이는 데 도움이 됩니다.  SDDC는 최소 3개의 호스트로 구성될 수 있으며, 전체 규모로 배포하면 다중 호스트 클러스터까지 가능합니다.

Cloud Volumes ONTAP 모든 VPC에 배포할 수 있으며 GCVE는 VM을 iSCSI LUN에 연결하기 위해 해당 VPC에 대한 개인 연결이 있어야 합니다.

GCVE SDDC를 구성하려면 다음을 참조하세요.link:vmw-gcp-gcve-setup.html["Google Cloud Platform(GCP)에서 가상화 환경 배포 및 구성"^] .  전제 조건으로, 연결이 설정된 후 GCVE 호스트에 있는 게스트 VM이 Cloud Volumes ONTAP 의 데이터를 사용할 수 있는지 확인합니다.

Cloud Volumes ONTAP 과 GCVE가 올바르게 구성된 후 Veeam Replication 기능을 사용하고 SnapMirror 활용하여 애플리케이션 볼륨을 Cloud Volumes ONTAP에 복사하여 온프레미스 워크로드를 GCVE(애플리케이션 VMDK가 있는 VM 및 게스트 스토리지가 있는 VM)로 복구하는 작업을 자동화하도록 Veeam을 구성하기 Cloud Volumes ONTAP.

====
.Veeam 구성 요소 설치
[%collapsible%open]
====
배포 시나리오에 따라 배포해야 할 Veeam 백업 서버, 백업 저장소 및 백업 프록시입니다.  이 사용 사례에서는 Veeam에 대한 개체 저장소를 배포할 필요가 없으며, Scale-out 저장소도 필요하지 않습니다.https://helpcenter.veeam.com/docs/backup/qsg_vsphere/deployment_scenarios.html["설치 절차는 Veeam 설명서를 참조하세요."]

====
.Veeam을 사용하여 VM 복제 설정
[%collapsible%open]
====
온프레미스 vCenter와 GCVE vCenter 모두 Veeam에 등록해야 합니다. https://helpcenter.veeam.com/docs/backup/qsg_vsphere/replication_job.html["vSphere VM 복제 작업 설정"]  마법사의 게스트 처리 단계에서 애플리케이션 인식 백업 및 복구에 SnapCenter 활용하므로 애플리케이션 처리 비활성화를 선택합니다.

.vSphere VM 복제 작업 설정
video::8b7e4a9b-7de1-4d48-a8e2-b01200f00692[panopto]
====
.Microsoft SQL Server VM의 장애 조치
[%collapsible%open]
====
.Microsoft SQL Server VM의 장애 조치
video::9762dc99-081b-41a2-ac68-b01200f00ac0[panopto]
====


== 이 솔루션의 이점

* SnapMirror 의 효율적이고 탄력적인 복제를 사용합니다.
* ONTAP 스냅샷 보존을 통해 사용 가능한 모든 시점으로 복구합니다.
* 스토리지, 컴퓨팅, 네트워크 및 애플리케이션 검증 단계 등 수백 개에서 수천 개의 VM을 복구하는 데 필요한 모든 단계에 대한 전체 자동화가 가능합니다.
* SnapCenter 복제된 볼륨을 변경하지 않는 복제 메커니즘을 사용합니다.
+
** 이렇게 하면 볼륨과 스냅샷의 데이터 손상 위험을 방지할 수 있습니다.
** DR 테스트 워크플로우 동안 복제 중단을 방지합니다.
** DR을 넘어 개발/테스트, 보안 테스트, 패치 및 업그레이드 테스트, 수정 테스트 등 워크플로우에 DR 데이터를 활용합니다.


* Veeam Replication을 사용하면 DR 사이트에서 VM IP 주소를 변경할 수 있습니다.

